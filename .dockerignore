# Before the docker CLI sends the context to the docker daemon, it looks for a file
# named .dockerignore in the root directory of the context. If this file exists, the
# CLI modifies the context to exclude files and directories that match patterns in it.
#
# You may want to specify which files to include in the context, rather than which
# to exclude. To achieve this, specify * as the first pattern, followed by one or
# more ! exception patterns.
#
# https://docs.docker.com/engine/reference/builder/#dockerignore-file

# Exclude everything:
#
*

# Now un-exclude required files and folders:
#
!.cargo
!*.toml
!*.lock
!tower-*
!zebra-*
!zebrad
!docker/entrypoint.sh
!docker/runtime-entrypoint.sh

# TODO:
# replace git with a supported way of resetting files modified by cargo-chef, with the correct timestamps.
# (This will improve Docker cache performance when the changes in a PR don't impact Rust builds.)
#
# Background:
# https://hackmd.io/@kobzol/S17NS71bh#Using-cargo-chef
# https://github.com/LukeMathWalker/cargo-chef/issues/180#issuecomment-1552965888
!.git
