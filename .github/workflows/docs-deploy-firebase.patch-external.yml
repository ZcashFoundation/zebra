# Workflow patches for skipping Google Cloud docs updates on PRs from external repositories.
name: Docs

# Run on PRs from external repositories, let them pass, and then Mergify will check them.
# GitHub doesn't support filtering workflows by source branch names, so we have to do it for each
# job.
on:
  pull_request:

# IMPORTANT
#
# The job names in `docs-deploy-firebase.yml`, `docs-deploy-firebase.patch.yml` and
# `docs-deploy-firebase.patch-external.yml` must be kept in sync.
jobs:
  build-docs-book:
    name: Build and Deploy Zebra Book Docs
    # Only run on PRs from external repositories.
    # (github.ref is always a local branch, so this check will skip non-PRs as well.)
    if: ${{ !contains(github.head_ref || github.ref, 'refs/heads/') }}
    runs-on: ubuntu-latest
    steps:
      - run: 'echo "No build required"'

  build-docs-internal:
    name: Build and Deploy Zebra Internal Docs
    # This dependency allows all these jobs to depend on a single condition, making it easier to
    # change.
    needs: build-docs-book
    runs-on: ubuntu-latest
    steps:
      - run: 'echo "No build required"'
